<!-- BEGIN_TF_DOCS -->
# Firewall
[![MIT License](https://img.shields.io/badge/license-MIT-orange.svg)](LICENSE) [![TF Registry](https://img.shields.io/badge/terraform-registry-blue.svg)](https://registry.terraform.io/modules/azurerm/resources/azure/latest/submodules/firewall)

Terraform module to create and manage a Firewall.

## Example

```hcl
terraform {
  required_version = ">= 1.0.0"
  required_providers {
    azurerm = {
      source  = "hashicorp/azurerm"
      version = ">=4.0.0"
    }
  }
}

provider "azurerm" {
  features {}
}

module "resource_group" {
  source      = "./modules/resource_group"
  location    = "westeurope"
  environment = "prd"
  workload    = "hub"
  instance    = "001"
}

module "virtual_network" {
  source              = "azurerm/resources/azure//modules/virtual_network"
  location            = "westeurope"
  environment         = "prd"
  workload            = "hub"
  instance            = "001"
  resource_group_name = module.resource_group.name
  address_space       = ["10.0.0.0/24"]
}

module "subnet" {
  source               = "azurerm/resources/azure//modules/subnet"
  location             = "westeurope"
  custom_name          = "AzureFirewallSubnet"
  resource_group_name  = module.resource_group.name
  virtual_network_name = module.virtual_network.name
  address_prefixes     = ["10.0.0.0/25"]
}

module "publicip" {
  source              = "azurerm/resources/azure//modules/public_ip"
  location            = "westeurope"
  environment         = "prd"
  workload            = "firewall"
  instance            = "001"
  resource_group_name = module.resource_group.name
}

module "firewall" {
  source               = "azurerm/resources/azure//modules/firewall"
  location             = "westeurope"
  environment          = "prd"
  workload             = "firewall"
  instance             = "001"
  resource_group_name  = module.resource_group.name
  public_ip_address_id = module.publicip.id
  subnet_id            = module.subnet.id
}
```

## Requirements

No requirements.

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | n/a |
| <a name="provider_local"></a> [local](#provider\_local) | n/a |
| <a name="provider_random"></a> [random](#provider\_random) | n/a |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_appgw"></a> [appgw](#module\_appgw) | PaloAltoNetworks/swfw-modules/azurerm//modules/appgw | 3.2.1 |
| <a name="module_bootstrap"></a> [bootstrap](#module\_bootstrap) | PaloAltoNetworks/swfw-modules/azurerm//modules/bootstrap | 3.2.1 |
| <a name="module_load_balancer"></a> [load\_balancer](#module\_load\_balancer) | PaloAltoNetworks/swfw-modules/azurerm//modules/loadbalancer | 3.2.1 |
| <a name="module_natgw"></a> [natgw](#module\_natgw) | PaloAltoNetworks/swfw-modules/azurerm//modules/natgw | 3.2.1 |
| <a name="module_ngfw_metrics"></a> [ngfw\_metrics](#module\_ngfw\_metrics) | PaloAltoNetworks/swfw-modules/azurerm//modules/ngfw_metrics | 3.2.1 |
| <a name="module_public_ip"></a> [public\_ip](#module\_public\_ip) | PaloAltoNetworks/swfw-modules/azurerm//modules/public_ip | 3.2.1 |
| <a name="module_vmseries"></a> [vmseries](#module\_vmseries) | PaloAltoNetworks/swfw-modules/azurerm//modules/vmseries | 3.2.1 |
| <a name="module_vnet"></a> [vnet](#module\_vnet) | PaloAltoNetworks/swfw-modules/azurerm//modules/vnet | 3.2.1 |
| <a name="module_vnet_peering"></a> [vnet\_peering](#module\_vnet\_peering) | PaloAltoNetworks/swfw-modules/azurerm//modules/vnet_peering | 3.2.1 |

## Resources

| Name | Type |
|------|------|
| [azurerm_availability_set.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/availability_set) | resource |
| [azurerm_resource_group.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/resource_group) | resource |
| [local_file.bootstrap_xml](https://registry.terraform.io/providers/hashicorp/local/latest/docs/resources/file) | resource |
| [random_password.this](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/password) | resource |
| [azurerm_resource_group.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/resource_group) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_appgws"></a> [appgws](#input\_appgws) | A map defining all Application Gateways in the current deployment.<br><br>For detailed documentation on how to configure this resource, for available properties, especially for the defaults,<br>refer to [module documentation](../../modules/appgw/README.md).<br><br>**Note!** \<br>The `rules` property is meant to bind together `backend_setting`, `redirect` or `url_path_map` (all 3 are mutually exclusive).<br>It represents the Rules section of an Application Gateway in Azure Portal.<br><br>Below you can find a brief list of most important properties:<br><br>- `name`             - (`string`, required) the name of the Application Gateway, will be prefixed with `var.name_prefix`.<br>- `vnet_key`         - (`string`, required) a key pointing to a VNET definition in the `var.vnets` map that stores the Subnet<br>                       described by `subnet_key`.<br>- `subnet_key`       - (`string`, required) a key pointing to a Subnet definition in the `var.vnets` map, this has to be an<br>                       Application Gateway V2 dedicated subnet.<br>- `zones`            - (`list`, optional, defaults to module default) parameter controlling if this is a zonal, or a non-zonal<br>                       deployment.<br>- `public_ip`        - (`map`, required) defines a Public IP resource used by the Application Gateway instance, a newly created<br>                       Public IP will have it's name prefixes with `var.name_prefix`.<br>- `listeners`        - (`map`, required) defines Application Gateway's Listeners, see<br>                       [module's documentation](../../modules/appgw/README.md#listeners) for details.<br>- `backend_pool`     - (`map`, optional, defaults to module default) backend pool definition, when skipped an empty backend<br>                       will be created.<br>- `backend_settings` - (`map`, optional, mutually exclusive with `redirects` and `url_path_maps`) defines HTTP backend<br>                       settings, see [module's documentation](../../modules/appgw/README.md#backend\_settings) for details.<br>- `probes`           - (`map`, optional, defaults to module default) defines backend probes used check health of backends, see<br>                       [module's documentation](../../modules/appgw/README.md#probes) for details.<br>- `rewrites`         - (`map`, optional, defaults to module default) defines rewrite rules, see<br>                       [module's documentation](../../modules/appgw/README.md#rewrites) for details.<br>- `redirects`        - (`map`, optional, mutually exclusive with `backend_settings` and `url_path_maps`) static redirects<br>                       definition, see [module's documentation](../../modules/appgw/README.md#redirects) for details.<br>- `url_path_maps`    - (`map`, optional, mutually exclusive with `backend_settings` and `redirects`) URL path maps definition,<br>                       see [module's documentation](../../modules/appgw/README.md#url\_path\_maps) for details.<br>- `rules`            - (`map`, required) Application Gateway Rules definition, bind together a `listener` with either<br>                       `backend_setting`, `redirect` or `url_path_map`, see<br>                       [module's documentation](../../modules/appgw/README.md#rules) for details. | <pre>map(object({<br>    name       = string<br>    vnet_key   = string<br>    subnet_key = string<br>    zones      = optional(list(string))<br>    public_ip = object({<br>      create              = optional(bool, true)<br>      name                = optional(string)<br>      resource_group_name = optional(string)<br>      key                 = optional(string)<br>    })<br>    domain_name_label = optional(string)<br>    capacity = optional(object({<br>      static = optional(number)<br>      autoscale = optional(object({<br>        min = number<br>        max = number<br>      }))<br>    }))<br>    enable_http2 = optional(bool)<br>    waf = optional(object({<br>      prevention_mode  = bool<br>      rule_set_type    = optional(string)<br>      rule_set_version = optional(string)<br>    }))<br>    managed_identities = optional(list(string))<br>    global_ssl_policy = optional(object({<br>      type                 = optional(string)<br>      name                 = optional(string)<br>      min_protocol_version = optional(string)<br>      cipher_suites        = optional(list(string))<br>    }))<br>    ssl_profiles = optional(map(object({<br>      name                            = string<br>      ssl_policy_name                 = optional(string)<br>      ssl_policy_min_protocol_version = optional(string)<br>      ssl_policy_cipher_suites        = optional(list(string))<br>    })))<br>    frontend_ip_configuration_name = optional(string, "public_ipconfig")<br>    listeners = map(object({<br>      name                     = string<br>      port                     = number<br>      protocol                 = optional(string)<br>      host_names               = optional(list(string))<br>      ssl_profile_name         = optional(string)<br>      ssl_certificate_path     = optional(string)<br>      ssl_certificate_pass     = optional(string)<br>      ssl_certificate_vault_id = optional(string)<br>      custom_error_pages       = optional(map(string))<br>    }))<br>    backend_pool = optional(object({<br>      name         = optional(string)<br>      vmseries_ips = optional(list(string))<br>    }))<br>    backend_settings = optional(map(object({<br>      name                      = string<br>      port                      = number<br>      protocol                  = string<br>      path                      = optional(string)<br>      hostname_from_backend     = optional(string)<br>      hostname                  = optional(string)<br>      timeout                   = optional(number)<br>      use_cookie_based_affinity = optional(bool)<br>      affinity_cookie_name      = optional(string)<br>      probe                     = optional(string)<br>      root_certs = optional(map(object({<br>        name = string<br>        path = string<br>      })))<br>    })))<br>    probes = optional(map(object({<br>      name       = string<br>      path       = string<br>      host       = optional(string)<br>      port       = optional(number)<br>      protocol   = optional(string)<br>      interval   = optional(number)<br>      timeout    = optional(number)<br>      threshold  = optional(number)<br>      match_code = optional(list(number))<br>      match_body = optional(string)<br>    })))<br>    rewrites = optional(map(object({<br>      name = optional(string)<br>      rules = optional(map(object({<br>        name     = string<br>        sequence = number<br>        conditions = optional(map(object({<br>          pattern     = string<br>          ignore_case = optional(bool)<br>          negate      = optional(bool)<br>        })))<br>        request_headers  = optional(map(string))<br>        response_headers = optional(map(string))<br>      })))<br>    })))<br>    redirects = optional(map(object({<br>      name                 = string<br>      type                 = string<br>      target_listener_key  = optional(string)<br>      target_url           = optional(string)<br>      include_path         = optional(bool)<br>      include_query_string = optional(bool)<br>    })))<br>    url_path_maps = optional(map(object({<br>      name        = string<br>      backend_key = string<br>      path_rules = optional(map(object({<br>        paths        = list(string)<br>        backend_key  = optional(string)<br>        redirect_key = optional(string)<br>      })))<br>    })))<br>    rules = map(object({<br>      name             = string<br>      priority         = number<br>      backend_key      = optional(string)<br>      listener_key     = string<br>      rewrite_key      = optional(string)<br>      url_path_map_key = optional(string)<br>      redirect_key     = optional(string)<br>    }))<br>  }))</pre> | `{}` | no |
| <a name="input_availability_sets"></a> [availability\_sets](#input\_availability\_sets) | A map defining availability sets. Can be used to provide infrastructure high availability when zones cannot be used.<br><br>Following properties are supported:<br><br>- `name`                - (`string`, required) name of the Application Insights.<br>- `update_domain_count` - (`number`, optional, defaults to Azure default) specifies the number of update domains that are used.<br>- `fault_domain_count`  - (`number`, optional, defaults to Azure default) specifies the number of fault domains that are used.<br><br>**Note!** \<br>Please keep in mind that Azure defaults are not working for every region (especially the small ones, without any Availability<br>Zones). Please verify how many update and fault domain are supported in a region before deploying this resource. | <pre>map(object({<br>    name                = string<br>    update_domain_count = optional(number)<br>    fault_domain_count  = optional(number)<br>  }))</pre> | `{}` | no |
| <a name="input_bootstrap_storages"></a> [bootstrap\_storages](#input\_bootstrap\_storages) | A map defining Azure Storage Accounts used to host file shares for bootstrapping NGFWs.<br><br>You can create or re-use an existing Storage Account and/or File Share. For details on all available properties please refer to<br>[module's documentation](../../modules/bootstrap/README.md). Following is just an extract of the most important ones:<br><br>- `name`                      - (`string`, required) name of the Storage Account that will be created or sourced.<br><br>  **Note** \<br>  For new Storage Accounts this name will not be prefixed with `var.name_prefix`. \<br>  Please note the limitations on naming. This has to be a globally unique name, between 3 and 63 chars, only lower-case letters<br>  and numbers.<br><br>- `resource_group_name`       - (`string`, optional, defaults to `null`) name of the Resource Group that hosts (sourced) or<br>                                will host (created) a Storage Account. When skipped the code will fall back to<br>                                `var.resource_group_name`.<br>- `storage_account`           - (`map`, optional, defaults to `{}`) a map controlling basic Storage Account configuration.<br><br>  The property you should pay attention to is:<br><br>  - `create` - (`bool`, optional, defaults to module default) controls if the Storage Account specified in the `name` property<br>               will be created or sourced.<br><br>  For detailed documentation see [module's documentation](../../modules/bootstrap/README.md#storage\_account).<br><br>- `storage_network_security`  - (`map`, optional, defaults to `{}`) a map defining network security settings for a **new**<br>                                storage account.<br><br>  The properties you should pay attention to are:<br><br>  - `allowed_subnet_keys` - (`list`, optional, defaults to `[]`) a list of keys pointing to Subnet definitions in the<br>                            `var.vnets` map. These Subnets will have dedicated access to the Storage Account. For this to work<br>                            they also need to have the Storage Account Service Endpoint enabled.<br>  - `vnet_key`            - (`string`, optional) a key pointing to a VNET definition in the `var.vnets` map that stores the<br>                            Subnets described in `allowed_subnet_keys`.<br><br>  For detailed documentation see [module's documentation](../../modules/bootstrap/README.md#storage\_network\_security).<br><br>- `file_shares_configuration` - (`map`, optional, defaults to `{}`) a map defining common File Share setting.<br><br>  The properties you should pay attention to are:<br><br>  - `create_file_shares`            - (`bool`, optional, defaults to module default) controls if the File Shares defined in the<br>                                      `file_shares` property will be created or sourced.<br>  - `disable_package_dirs_creation` - (`bool`, optional, defaults to module default) for sourced File Shares, controls if the<br>                                      bootstrap package folder structure will be created.<br><br>  For detailed documentation see [module's documentation](../../modules/bootstrap/README.md#file\_shares\_configuration).<br><br>- `file_shares`               - (`map`, optional, defaults to `{}`) a map that holds File Shares and bootstrap package<br>                                configuration. For detailed description see<br>                                [module's documentation](../../modules/bootstrap/README.md#file\_shares). | <pre>map(object({<br>    name                = string<br>    resource_group_name = optional(string)<br>    storage_account = optional(object({<br>      create           = optional(bool)<br>      replication_type = optional(string)<br>      kind             = optional(string)<br>      tier             = optional(string)<br>      blob_retention   = optional(number)<br>    }), {})<br>    storage_network_security = optional(object({<br>      min_tls_version     = optional(string)<br>      allowed_public_ips  = optional(list(string))<br>      vnet_key            = optional(string)<br>      allowed_subnet_keys = optional(list(string), [])<br>    }), {})<br>    file_shares_configuration = optional(object({<br>      create_file_shares            = optional(bool)<br>      disable_package_dirs_creation = optional(bool)<br>      quota                         = optional(number)<br>      access_tier                   = optional(string)<br>    }), {})<br>    file_shares = optional(map(object({<br>      name                   = string<br>      bootstrap_package_path = optional(string)<br>      bootstrap_files        = optional(map(string))<br>      bootstrap_files_md5    = optional(map(string))<br>      quota                  = optional(number)<br>      access_tier            = optional(string)<br>    })), {})<br>  }))</pre> | `{}` | no |
| <a name="input_create_resource_group"></a> [create\_resource\_group](#input\_create\_resource\_group) | When set to `true` it will cause a Resource Group creation.<br>Name of the newly specified RG is controlled by `resource_group_name`.<br><br>When set to `false` the `resource_group_name` parameter is used to specify a name of an existing Resource Group. | `bool` | `true` | no |
| <a name="input_load_balancers"></a> [load\_balancers](#input\_load\_balancers) | A map containing configuration for all (both private and public) Load Balancers.<br><br>This is a brief description of available properties. For a detailed one please refer to<br>[module documentation](../../modules/loadbalancer/README.md).<br><br>Following properties are available:<br><br>- `name`                    - (`string`, required) a name of the Load Balancer.<br>- `vnet_key`                - (`string`, optional, defaults to `null`) a key pointing to a VNET definition in the `var.vnets`<br>                              map that stores the Subnet described by `subnet_key`.<br>- `zones`                   - (`list`, optional, defaults to module default) a list of zones for Load Balancer's frontend IP<br>                              configurations.<br>- `backend_name`            - (`string`, optional, defaults to "vmseries\_backend") a name of the backend pool to create.<br>- `health_probes`           - (`map`, optional, defaults to `null`) a map defining health probes that will be used by load<br>                              balancing rules, please refer to<br>                              [module documentation](../../modules/loadbalancer/README.md#health\_probes) for more specific use<br>                              cases and available properties.<br>- `nsg_auto_rules_settings` - (`map`, optional, defaults to `null`) a map defining a location of an existing NSG rule that will<br>                              be populated with `Allow` rules for each load balancing rule (`in_rules`), please refer to<br>                              [module documentation](../../modules/loadbalancer/README.md#nsg\_auto\_rules\_settings) for<br>                              available properties.<br><br>  Please note that in this example two additional properties are available:<br><br>  - `nsg_vnet_key` - (`string`, optional, mutually exclusive with `nsg_name`) a key pointing to a VNET definition in the<br>                     `var.vnets` map that stores the NSG described by `nsg_key`.<br>  - `nsg_key`      - (`string`, optional, mutually exclusive with `nsg_name`) a key pointing to an NSG definition in the<br>                     `var.vnets` map.<br><br>- `frontend_ips`            - (`map`, optional, defaults to `{}`) a map containing frontend IP configuration with respective<br>                              `in_rules` and `out_rules`, please refer to<br>                              [module documentation](../../modules/loadbalancer/README.md#frontend\_ips) for available<br>                              properties.<br><br>  **Note!** \<br>  In this example the `subnet_id` is not available directly, another property has been introduced instead:<br><br>  - `subnet_key` - (`string`, optional, defaults to `null`) a key pointing to a Subnet definition in the `var.vnets` map. | <pre>map(object({<br>    name         = string<br>    vnet_key     = optional(string)<br>    zones        = optional(list(string))<br>    backend_name = optional(string, "vmseries_backend")<br>    health_probes = optional(map(object({<br>      name                = string<br>      protocol            = string<br>      port                = optional(number)<br>      probe_threshold     = optional(number)<br>      interval_in_seconds = optional(number)<br>      request_path        = optional(string)<br>    })))<br>    nsg_auto_rules_settings = optional(object({<br>      nsg_name                = optional(string)<br>      nsg_vnet_key            = optional(string)<br>      nsg_key                 = optional(string)<br>      nsg_resource_group_name = optional(string)<br>      source_ips              = list(string)<br>      base_priority           = optional(number)<br>    }))<br>    frontend_ips = optional(map(object({<br>      name                          = string<br>      subnet_key                    = optional(string)<br>      create_public_ip              = optional(bool, false)<br>      public_ip_name                = optional(string)<br>      public_ip_resource_group_name = optional(string)<br>      public_ip_key                 = optional(string)<br>      public_ip_prefix_key          = optional(string)<br>      private_ip_address            = optional(string)<br>      gwlb_key                      = optional(string)<br>      in_rules = optional(map(object({<br>        name                = string<br>        protocol            = string<br>        port                = number<br>        backend_port        = optional(number)<br>        health_probe_key    = optional(string)<br>        floating_ip         = optional(bool)<br>        session_persistence = optional(string)<br>        nsg_priority        = optional(number)<br>      })), {})<br>      out_rules = optional(map(object({<br>        name                     = string<br>        protocol                 = string<br>        allocated_outbound_ports = optional(number)<br>        enable_tcp_reset         = optional(bool)<br>        idle_timeout_in_minutes  = optional(number)<br>      })), {})<br>    })), {})<br>  }))</pre> | `{}` | no |
| <a name="input_name_prefix"></a> [name\_prefix](#input\_name\_prefix) | A prefix that will be added to all created resources.<br>There is no default delimiter applied between the prefix and the resource name.<br>Please include the delimiter in the actual prefix.<br><br>Example:<pre>name_prefix = "test-"</pre>**Note!** \<br>This prefix is not applied to existing resources. If you plan to reuse i.e. a VNET please specify it's full name,<br>even if it is also prefixed with the same value as the one in this property. | `string` | `""` | no |
| <a name="input_natgws"></a> [natgws](#input\_natgws) | A map defining NAT Gateways.<br><br>Please note that a NAT Gateway is a zonal resource, this means it's always placed in a zone (even when you do not specify one<br>explicitly). Please refer to Microsoft documentation for notes on NAT Gateway's zonal resiliency.<br>For detailed documentation on each property refer to [module documentation](../../modules/natgw/README.md).<br><br>Following properties are supported:<br>- `name`                - (`string`, required) a name of a NAT Gateway. In case `create_natgw = false` this should be a full<br>                          resource name, including prefixes.<br>- `vnet_key`            - (`string`, required) a name (key value) of a VNET defined in `var.vnets` that hosts a subnet this<br>                          NAT Gateway will be assigned to.<br>- `subnet_keys`         - (`list(string)`, required) a list of subnets (key values) the NAT Gateway will be assigned to,<br>                          defined in `var.vnets` for a VNET described by `vnet_name`.<br>- `create_natgw`        - (`bool`, optional, defaults to `true`) create (`true`) or source an existing NAT Gateway (`false`),<br>                          created or sourced: the NAT Gateway will be assigned to a subnet created by the `vnet` module.<br>- `resource_group_name` - (`string`, optional) name of a Resource Group hosting the NAT Gateway (newly created or the existing<br>                          one).<br>- `zone`                - (`string`, optional) an Availability Zone in which the NAT Gateway will be placed, when skipped<br>                          Azure will pick a zone.<br>- `idle_timeout`        - (`number`, optional, defults to 4) connection IDLE timeout in minutes, for newly created resources.<br>- `public_ip`           - (`object`, optional) an object defining a public IP resource attached to the NAT Gateway.<br>- `public_ip_prefix`    - (`object`, optional) an object defining a public IP prefix resource attached to the NAT Gatway.<br><br>Example:<pre>natgws = {<br>  "natgw" = {<br>    name        = "natgw"<br>    vnet_key    = "transit-vnet"<br>    subnet_keys = ["management"]<br>    public_ip = {<br>      create = true<br>      name   = "natgw-pip"<br>    }<br>  }<br>}</pre> | <pre>map(object({<br>    name                = string<br>    vnet_key            = string<br>    subnet_keys         = list(string)<br>    create_natgw        = optional(bool, true)<br>    resource_group_name = optional(string)<br>    zone                = optional(string)<br>    idle_timeout        = optional(number, 4)<br>    public_ip = optional(object({<br>      create              = bool<br>      name                = optional(string)<br>      resource_group_name = optional(string)<br>      key                 = optional(string)<br>    }))<br>    public_ip_prefix = optional(object({<br>      create              = bool<br>      name                = optional(string)<br>      resource_group_name = optional(string)<br>      length              = optional(number)<br>      key                 = optional(string)<br>    }))<br>  }))</pre> | `{}` | no |
| <a name="input_ngfw_metrics"></a> [ngfw\_metrics](#input\_ngfw\_metrics) | A map controlling metrics-relates resources.<br><br>When set to explicit `null` (default) it will disable any metrics resources in this deployment.<br><br>When defined it will either create or source a Log Analytics Workspace and create Application Insights instances (one per each<br>Scale Set). All instances will be automatically connected to the workspace. The name of the Application Insights instance will<br>be derived from the Scale Set name and suffixed with `-ai`.<br><br>All the settings available below are common to the Log Analytics Workspace and Application Insight instances.<br><br>Following properties are available:<br><br>- `name`                      - (`string`, required) name of the (common) Log Analytics Workspace.<br>- `create_workspace`          - (`bool`, optional, defaults to `true`) controls whether we create or source an existing Log<br>                                Analytics Workspace.<br>- `resource_group_name`       - (`string`, optional, defaults to `var.resource_group_name`) name of the Resource Group hosting<br>                                the Log Analytics Workspace.<br>- `sku`                       - (`string`, optional, defaults to module default) the SKU of the Log Analytics Workspace.<br>- `metrics_retention_in_days` - (`number`, optional, defaults to module default) workspace and insights data retention in days,<br>                                possible values are between 30 and 730. For sourced Workspaces this applies only to the<br>                                Application Insights instances. | <pre>object({<br>    name                      = string<br>    create_workspace          = optional(bool, true)<br>    resource_group_name       = optional(string)<br>    sku                       = optional(string)<br>    metrics_retention_in_days = optional(number)<br>  })</pre> | `null` | no |
| <a name="input_public_ips"></a> [public\_ips](#input\_public\_ips) | A map defining Public IP Addresses and Prefixes.<br><br>Following properties are available:<br><br>- `public_ip_addresses` - (`map`, optional) map of objects describing Public IP Addresses, please refer to<br>                          [module documentation](../../modules/public\_ip/README.md#public\_ip\_addresses)<br>                          for available properties.<br>- `public_ip_prefixes`  - (`map`, optional) map of objects describing Public IP Prefixes, please refer to<br>                          [module documentation](../../modules/public\_ip/README.md#public\_ip\_prefixes)<br>                          for available properties. | <pre>object({<br>    public_ip_addresses = optional(map(object({<br>      create                     = bool<br>      name                       = string<br>      resource_group_name        = optional(string)<br>      zones                      = optional(list(string))<br>      domain_name_label          = optional(string)<br>      idle_timeout_in_minutes    = optional(number)<br>      prefix_name                = optional(string)<br>      prefix_resource_group_name = optional(string)<br>    })), {})<br>    public_ip_prefixes = optional(map(object({<br>      create              = bool<br>      name                = string<br>      resource_group_name = optional(string)<br>      zones               = optional(list(string))<br>      length              = optional(number)<br>    })), {})<br>  })</pre> | `{}` | no |
| <a name="input_region"></a> [region](#input\_region) | The Azure region to use. | `string` | n/a | yes |
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | Name of the Resource Group. | `string` | n/a | yes |
| <a name="input_tags"></a> [tags](#input\_tags) | Map of tags to assign to the created resources. | `map(string)` | `{}` | no |
| <a name="input_test_infrastructure"></a> [test\_infrastructure](#input\_test\_infrastructure) | A map defining test infrastructure including test VMs and Azure Bastion hosts.<br><br>For details and defaults for available options please refer to the<br>[`test_infrastructure`](../../modules/test\_infrastructure/README.md) module.<br><br>Following properties are supported:<br><br>- `create_resource_group`  - (`bool`, optional, defaults to `true`) when set to `true`, a new Resource Group is created. When<br>                             set to `false`, an existing Resource Group is sourced.<br>- `resource_group_name`    - (`string`, optional) name of the Resource Group to be created or sourced.<br>- `vnets`                  - (`map`, required) a map defining VNETs and peerings for the test environment. The most basic<br>                             properties are as follows:<br><br>  - `create_virtual_network`  - (`bool`, optional, defaults to `true`) when set to `true` will create a VNET,<br>                                `false` will source an existing VNET.<br>  - `name`                    - (`string`, required) a name of a VNET. In case `create_virtual_network = `false` this should be<br>                                a full resource name, including prefixes.<br>  - `address\_space`           - (`list(string)`, required when `create\_virtual\_network = `false`) a list of CIDRs for a newly<br>                                created VNET.<br>  - `network_security_groups` - (`map`, optional) map of Network Security Groups to create, for details see<br>                                [VNET module documentation](../../modules/vnet/README.md#network\_security\_groups).<br>  - `route_tables`            - (`map`, optional) map of Route Tables to create, for details see<br>                                [VNET module documentation](../../modules/vnet/README.md#route\_tables).<br>  - `subnets`                 - (`map`, optional) map of Subnets to create or source, for details see<br>                                [VNET module documentation](../../modules/vnet/README.md#subnets).<br>  - `local_peer_config`       - (`map`, optional) a map that contains local peer configuration parameters. This value allows to <br>                                set `allow_virtual_network_access`, `allow_forwarded_traffic`, `allow_gateway_transit` and <br>                                `use_remote_gateways` parameters on the local VNet peering. <br>  - `remote_peer_config`      - (`map`, optional) a map that contains remote peer configuration parameters. This value allows to<br>                                set `allow_virtual_network_access`, `allow_forwarded_traffic`, `allow_gateway_transit` and <br>                                `use_remote_gateways` parameters on the remote VNet peering.<br><br>  For all properties and their default values see [module's documentation](../../modules/test\_infrastructure/README.md#vnets).<br><br>- `load_balancers`         - (`map`, optional) a map containing configuration for all (both private and public) Load Balancers.<br>                             The most basic properties are as follows:<br><br>  - `name`                    - (`string`, required) a name of the Load Balancer.<br>  - `vnet_key`                - (`string`, optional, defaults to `null`) a key pointing to a VNET definition in the `var.vnets`<br>                                map that stores the Subnet described by `subnet_key`.<br>  - `zones`                   - (`list`, optional, defaults to module default) a list of zones for Load Balancer's frontend IP<br>                                configurations.<br>  - `backend_name`            - (`string`, optional) a name of the backend pool to create.<br>  - `health_probes`           - (`map`, optional, defaults to `null`) a map defining health probes that will be used by load<br>                                balancing rules, please refer to<br>                                [loadbalancer module documentation](../../modules/loadbalancer/README.md#health\_probes) for<br>                                more specific use cases and available properties.<br>  - `nsg_auto_rules_settings` - (`map`, optional, defaults to `null`) a map defining a location of an existing NSG rule that<br>                                will be populated with `Allow` rules for each load balancing rule (`in_rules`), please refer to<br>                                [loadbalancer module documentation](../../modules/loadbalancer/README.md#nsg\_auto\_rules\_settings)<br>                                for available properties.<br><br>  Please note that in this example two additional properties are available:<br><br>    - `nsg_vnet_key` - (`string`, optional, mutually exclusive with `nsg_name`) a key pointing to a VNET definition in the<br>                       `var.vnets` map that stores the NSG described by `nsg_key`.<br>    - `nsg_key`      - (`string`, optional, mutually exclusive with `nsg_name`) a key pointing to an NSG definition in the<br>                       `var.vnets` map.<br><br>  - `frontend_ips`            - (`map`, optional, defaults to `{}`) a map containing frontend IP configuration with respective<br>                                `in_rules` and `out_rules`, please refer to<br>                                [loadbalancer module documentation](../../modules/loadbalancer/README.md#frontend\_ips) for<br>                                available properties.<br><br>    **Note!** \<br>    In this example the `subnet_id` is not available directly, another property has been introduced instead:<br><br>    - `subnet_key` - (`string`, optional, defaults to `null`) a key pointing to a Subnet definition in the `var.vnets` map.<br><br>  For all properties and their default values see<br>  [module's documentation](../../modules/test\_infrastructure/README.md#load\_balancers).<br><br>- `authentication`         - (`map`, optional, defaults to example defaults) authentication settings for the deployed VMs.<br>- `spoke_vms`              - (`map`, required) a map defining test VMs. The most basic properties are as follows:<br><br>  - `name`              - (`string`, required) a name of the VM.<br>  - `vnet_key`          - (`string`, required) a key describing a VNET defined in `vnets` property.<br>  - `subnet_key`        - (`string`, required) a key describing a Subnet found in a VNET definition.<br>  - `load_balancer_key` - (`string`, optional) a key describing a Load Balancer defined in `load_balancers` property.<br><br>  For all properties and their default values see<br>  [module's documentation](../../modules/test\_infrastructure/README.md#test\_vms).<br><br>- `bastions`               - (`map`, required) a map containing Azure Bastion definitions. The most basic properties are as<br>                             follows:<br><br>  - `name`       - (`string`, required) an Azure Bastion name.<br>  - `vnet_key`   - (`string`, required) a key describing a VNET defined in `vnets` property. This VNET should already have an<br>                   existing subnet called `AzureBastionSubnet` (the name is hardcoded by Microsoft).<br>  - `subnet_key` - (`string`, required) a key pointing to a Subnet dedicated to a Bastion deployment.<br><br>  For all properties and their default values see<br>  [module's documentation](../../modules/test\_infrastructure/README.md#bastions). | <pre>map(object({<br>    create_resource_group = optional(bool, true)<br>    resource_group_name   = optional(string)<br>    vnets = map(object({<br>      create_virtual_network  = optional(bool, true)<br>      name                    = string<br>      address_space           = optional(list(string))<br>      dns_servers             = optional(list(string))<br>      hub_resource_group_name = optional(string)<br>      hub_vnet_name           = string<br>      network_security_groups = optional(map(object({<br>        name = string<br>        rules = optional(map(object({<br>          name                         = string<br>          priority                     = number<br>          direction                    = string<br>          access                       = string<br>          protocol                     = string<br>          source_port_range            = optional(string)<br>          source_port_ranges           = optional(list(string))<br>          destination_port_range       = optional(string)<br>          destination_port_ranges      = optional(list(string))<br>          source_address_prefix        = optional(string)<br>          source_address_prefixes      = optional(list(string))<br>          destination_address_prefix   = optional(string)<br>          destination_address_prefixes = optional(list(string))<br>        })), {})<br>      })), {})<br>      route_tables = optional(map(object({<br>        name                          = string<br>        bgp_route_propagation_enabled = optional(bool)<br>        routes = map(object({<br>          name                = string<br>          address_prefix      = string<br>          next_hop_type       = string<br>          next_hop_ip_address = optional(string)<br>        }))<br>      })), {})<br>      subnets = optional(map(object({<br>        create                          = optional(bool, true)<br>        name                            = string<br>        address_prefixes                = optional(list(string), [])<br>        network_security_group_key      = optional(string)<br>        route_table_key                 = optional(string)<br>        enable_storage_service_endpoint = optional(bool)<br>        enable_cloudngfw_delegation     = optional(bool)<br>      })), {})<br>      local_peer_config = optional(object({<br>        allow_virtual_network_access = optional(bool, true)<br>        allow_forwarded_traffic      = optional(bool, true)<br>        allow_gateway_transit        = optional(bool, false)<br>        use_remote_gateways          = optional(bool, false)<br>      }), {})<br>      remote_peer_config = optional(object({<br>        allow_virtual_network_access = optional(bool, true)<br>        allow_forwarded_traffic      = optional(bool, true)<br>        allow_gateway_transit        = optional(bool, false)<br>        use_remote_gateways          = optional(bool, false)<br>      }), {})<br>    }))<br>    load_balancers = optional(map(object({<br>      name         = string<br>      vnet_key     = optional(string)<br>      zones        = optional(list(string))<br>      backend_name = optional(string)<br>      health_probes = optional(map(object({<br>        name                = string<br>        protocol            = string<br>        port                = optional(number)<br>        probe_threshold     = optional(number)<br>        interval_in_seconds = optional(number)<br>        request_path        = optional(string)<br>      })))<br>      nsg_auto_rules_settings = optional(object({<br>        nsg_name                = optional(string)<br>        nsg_vnet_key            = optional(string)<br>        nsg_key                 = optional(string)<br>        nsg_resource_group_name = optional(string)<br>        source_ips              = list(string)<br>        base_priority           = optional(number)<br>      }))<br>      frontend_ips = optional(map(object({<br>        name                          = string<br>        subnet_key                    = optional(string)<br>        create_public_ip              = optional(bool, false)<br>        public_ip_name                = optional(string)<br>        public_ip_resource_group_name = optional(string)<br>        public_ip_key                 = optional(string)<br>        public_ip_prefix_key          = optional(string)<br>        private_ip_address            = optional(string)<br>        gwlb_key                      = optional(string)<br>        in_rules = optional(map(object({<br>          name                = string<br>          protocol            = string<br>          port                = number<br>          backend_port        = optional(number)<br>          health_probe_key    = optional(string)<br>          floating_ip         = optional(bool)<br>          session_persistence = optional(string)<br>          nsg_priority        = optional(number)<br>        })), {})<br>        out_rules = optional(map(object({<br>          name                     = string<br>          protocol                 = string<br>          allocated_outbound_ports = optional(number)<br>          enable_tcp_reset         = optional(bool)<br>          idle_timeout_in_minutes  = optional(number)<br>        })), {})<br>      })), {})<br>    })), {})<br>    authentication = optional(object({<br>      username = optional(string, "bitnami")<br>      password = optional(string)<br>    }), {})<br>    spoke_vms = map(object({<br>      name               = string<br>      interface_name     = optional(string)<br>      disk_name          = optional(string)<br>      vnet_key           = string<br>      subnet_key         = string<br>      load_balancer_key  = optional(string)<br>      private_ip_address = optional(string)<br>      size               = optional(string)<br>      image = optional(object({<br>        publisher               = optional(string)<br>        offer                   = optional(string)<br>        sku                     = optional(string)<br>        version                 = optional(string)<br>        enable_marketplace_plan = optional(bool)<br>      }), {})<br>      custom_data = optional(string)<br>    }))<br>    bastions = map(object({<br>      name                          = string<br>      create_public_ip              = optional(bool, true)<br>      public_ip_name                = optional(string)<br>      public_ip_resource_group_name = optional(string)<br>      public_ip_key                 = optional(string)<br>      vnet_key                      = string<br>      subnet_key                    = string<br>    }))<br>  }))</pre> | `{}` | no |
| <a name="input_vmseries"></a> [vmseries](#input\_vmseries) | A map defining Azure Virtual Machines based on Palo Alto Networks Next Generation Firewall image.<br><br>For details and defaults for available options please refer to the [`vmseries`](../../modules/vmseries/README.md) module.<br><br>The most basic properties are as follows:<br><br>- `name`            - (`string`, required) name of the VM, will be prefixed with the value of `var.name_prefix`.<br>- `vnet_key`        - (`string`, required) a key of a VNET defined in `var.vnets`. This is the VNET that hosts subnets used to<br>                      deploy network interfaces for deployed VM.<br>- `authentication`  - (`map`, optional, defaults to example defaults) authentication settings for the deployed VM.<br><br>  The `authentication` property is optional and holds the firewall admin access details. By default, standard username<br>  `panadmin` will be set and a random password will be auto-generated for you (available in Terraform outputs).<br><br>  **Note!** \<br>  The `disable_password_authentication` property is by default `false` in this example. When using this value, you don't have<br>  to specify anything but you can still additionally pass SSH keys for authentication. You can however set this property to<br>  `true`, then you have to specify `ssh_keys` property.<br><br>  For all properties and their default values see [module's documentation](../../modules/vmseries/README.md#authentication).<br><br>- `image`           - (`map`, optional) properties defining a base image used by the deployed VM. The `image` property is<br>                      required (if no common properties were set within `vmseries_universal` variable) but there are only 2 <br>                      properties (mutually exclusive) that have to be set, either:<br><br>  - `version`   - (`string`, optional) describes the PAN-OS image version from Azure Marketplace.<br>  - `custom_id` - (`string`, optional) absolute ID of your own custom PAN-OS image.<br><br>  For details on all properties refer to [module's documentation](../../modules/vmseries/README.md#image).<br><br>- `virtual_machine` - (`map`, optional, defaults to module default) a map that groups most common VM configuration options.<br>                      Most common properties are:<br><br>  - `size`              - (`string`, optional, defaults to module default) Azure VM size (type). Consult the *VM-Series<br>                          Deployment Guide* as only a few selected sizes are supported.<br>  - `zone`              - (`string`, required) the Availability Zone in which the VM and (if deployed) public IP addresses will<br>                          be created.<br>  - `disk_type`         - (`string`, optional, defaults to module default) type of a Managed Disk which should be created,<br>                          possible values are `Standard_LRS`, `StandardSSD_LRS` or `Premium_LRS` (works only for selected<br>                          `size` values).<br>  - `bootstrap_options` - (`map`, optional, mutually exclusive with `bootstrap_package`) bootstrap options passed to PAN-OS<br>                          when launched for the 1st time, for details see module documentation.<br>  - `bootstrap_package` - (`map`, optional, mutually exclusive with `bootstrap_options`) a map defining content of the<br>                          bootstrap package.<br><br>    **Note!** \<br>    At least one of `static_files`, `bootstrap_xml_template` or `bootstrap_package_path` is required. You can use a combination<br>    of all 3. The `bootstrap_package_path` is the less important. For details on this mechanism and for details on the other<br>    properties see the [`bootstrap` module documentation](../../modules/bootstrap/README.md).<br><br>    Following properties are available:<br><br>    - `bootstrap_storage_key`  - (`string`, required) a key of a bootstrap storage defined in `var.bootstrap_storages` that<br>                                 will host bootstrap packages. Each package will be hosted on a separate File Share. The File<br>                                 Shares will be created automatically, one for each firewall.<br>    - `static_files`           - (`map`, optional, defaults to `{}`) a map containing files that will be copied to a File<br>                                 Share, see [`file_shares.bootstrap_files`](../../modules/bootstrap/README.md#file\_shares)<br>                                 property documentation for details.<br>    - `bootstrap_package_path` - (`string`, optional, defaults to `null`) a path to a folder containing a full bootstrap<br>                                 package.<br>    - `bootstrap_xml_template` - (`string`, optional, defaults to `null`) a path to a `bootstrap.xml` template. If this example<br>                                 is using full bootstrap method, the sample templates are in [`templates`](./templates) folder.<br><br>      The templates are used to provide `day0` like configuration which consists of:<br><br>      - network interfaces configuration.<br>      - one or more (depending on the architecture) Virtual Routers configurations. This config contains static routes<br>        required for the Load Balancer (and Application Gateway, if defined) health checks to work and routes that allow<br>        Inbound and OBEW traffic.<br>      - *any-any* security rule.<br>      - an outbound NAT rule that will allow the Outbound traffic to flow to the Internet.<br><br>      **Note!** \<br>      Day0 configuration is **not meant** to be **secure**. It's here merely to help with the basic firewall setup. When<br>      `bootstrap_xml_template` is set, one of the following properties might be required.<br><br>    - `private_snet_key`       - (`string`, required only when `bootstrap_xml_template` is set, defaults to `null`) a key<br>                                 pointing to a private Subnet definition in `var.vnets` (the `vnet_key` property is used to<br>                                 identify a VNET). The Subnet definition is used to calculate static routes for a private<br>                                 Load Balancer health checks and for Inbound traffic.<br>    - `public_snet_key`        - (`string`, required only when `bootstrap_xml_template` is set, defaults to `null`) a key<br>                                 pointing to a public Subnet definition in `var.vnets` (the `vnet_key` property is used to<br>                                 identify a VNET). The Subnet definition is used to calculate static routes for a public<br>                                 Load Balancer health checks and for Outbound traffic.<br>    - `ai_update_interval`     - (`number`, optional, defaults to `5`) Application Insights update interval, used only when<br>                                 `ngfw_metrics` module is defined and used in this example. The Application Insights<br>                                 Instrumentation Key will be populated automatically.<br>    - `intranet_cidr`          - (`string`, optional, defaults to `null`) a CIDR of the Intranet - combined CIDR of all<br>                                 private networks. When set it will override the private Subnet CIDR for inbound traffic<br>                                 static routes.<br><br>    For details on all properties refer to [module's documentation](../../modules/vmseries/README.md#virtual\_machine).<br><br>- `interfaces`      - (`list`, required) configuration of all network interfaces. Order of the interfaces does matter - the<br>                      1<sup>st</sup> interface is the management one. Most common properties are:<br><br>  - `name`                    - (`string`, required) name of the network interface (will be prefixed with `var.name_prefix`).<br>  - `subnet_key`              - (`string`, required) a key of a subnet to which the interface will be assigned as defined in<br>                                `var.vnets`. Key identifying the VNET is defined in `virtual_machine.vnet_key` property.<br>  - `create_public_ip`        - (`bool`, optional, defaults to `false`) create a Public IP for an interface.<br>  - `load_balancer_key`       - (`string`, optional, defaults to `null`) key of a Load Balancer defined in `var.loadbalancers`<br>                                variable, network interface that has this property defined will be added to the Load Balancer's<br>                                backend pool.<br>  - `application_gateway_key` - (`string`, optional, defaults to `null`) key of an Application Gateway defined in `var.appgws`<br>                                variable, network interface that has this property defined will be added to the Application<br>                                Gateway's backend pool. Mutually exclusive with `appgw_backend_pool_id`.<br>  - `appgw_backend_pool_id`   - (`string`, optional, defaults to `null`) ID of the Application Gateway backend pool to which<br>                                the network interface will be added. Mutually exclusive with `application_gateway_key`.<br><br>  For details on all properties refer to [module's documentation](../../modules/panorama/README.md#interfaces). | <pre>map(object({<br>    name     = string<br>    vnet_key = string<br>    authentication = optional(object({<br>      username                        = optional(string, "panadmin")<br>      password                        = optional(string)<br>      disable_password_authentication = optional(bool, false)<br>      ssh_keys                        = optional(list(string), [])<br>    }), {})<br>    image = optional(object({<br>      version                 = optional(string)<br>      publisher               = optional(string)<br>      offer                   = optional(string)<br>      sku                     = optional(string)<br>      enable_marketplace_plan = optional(bool)<br>      custom_id               = optional(string)<br>    }))<br>    virtual_machine = object({<br>      size = optional(string)<br>      bootstrap_options = optional(object({<br>        type                                  = optional(string)<br>        ip-address                            = optional(string)<br>        default-gateway                       = optional(string)<br>        netmask                               = optional(string)<br>        ipv6-address                          = optional(string)<br>        ipv6-default-gateway                  = optional(string)<br>        hostname                              = optional(string)<br>        panorama-server                       = optional(string)<br>        panorama-server-2                     = optional(string)<br>        tplname                               = optional(string)<br>        dgname                                = optional(string)<br>        cgname                                = optional(string)<br>        dns-primary                           = optional(string)<br>        dns-secondary                         = optional(string)<br>        vm-auth-key                           = optional(string)<br>        op-command-modes                      = optional(string)<br>        op-cmd-dpdk-pkt-io                    = optional(string)<br>        plugin-op-commands                    = optional(string)<br>        dhcp-send-hostname                    = optional(string)<br>        dhcp-send-client-id                   = optional(string)<br>        dhcp-accept-server-hostname           = optional(string)<br>        dhcp-accept-server-domain             = optional(string)<br>        vm-series-auto-registration-pin-id    = optional(string)<br>        vm-series-auto-registration-pin-value = optional(string)<br>        auth-key                              = optional(string)<br>        authcodes                             = optional(string)<br>      }))<br>      bootstrap_package = optional(object({<br>        bootstrap_storage_key  = string<br>        static_files           = optional(map(string), {})<br>        bootstrap_package_path = optional(string)<br>        bootstrap_xml_template = optional(string)<br>        private_snet_key       = optional(string)<br>        public_snet_key        = optional(string)<br>        ai_update_interval     = optional(number, 5)<br>        intranet_cidr          = optional(string)<br>      }))<br>      zone                          = string<br>      disk_type                     = optional(string)<br>      disk_name                     = optional(string)<br>      avset_key                     = optional(string)<br>      capacity_reservation_group_id = optional(string)<br>      accelerated_networking        = optional(bool)<br>      allow_extension_operations    = optional(bool)<br>      encryption_at_host_enabled    = optional(bool)<br>      disk_encryption_set_id        = optional(string)<br>      enable_boot_diagnostics       = optional(bool, true)<br>      boot_diagnostics_storage_uri  = optional(string)<br>      identity_type                 = optional(string)<br>      identity_ids                  = optional(list(string))<br>    })<br>    interfaces = list(object({<br>      name                          = string<br>      subnet_key                    = string<br>      create_public_ip              = optional(bool, false)<br>      public_ip_name                = optional(string)<br>      public_ip_resource_group_name = optional(string)<br>      public_ip_key                 = optional(string)<br>      private_ip_address            = optional(string)<br>      load_balancer_key             = optional(string)<br>      application_gateway_key       = optional(string)<br>      appgw_backend_pool_id         = optional(string)<br>    }))<br>  }))</pre> | `{}` | no |
| <a name="input_vmseries_universal"></a> [vmseries\_universal](#input\_vmseries\_universal) | A map defining common settings for all created VM-Series instances. <br><br>It duplicates popular properties from `vmseries` variable, specifically `vmseries.image` and `vmseries.virtual_machine` maps.<br>However, if values are set in those maps, they still take precedence over the ones set within this variable. As a result, all<br>universal properties can be overriden on a per-VM basis.<br><br>Following properties are supported:<br><br>- `version`           - (`string`, optional) describes the PAN-OS image version from Azure Marketplace.<br>- `size`              - (`string`, optional, defaults to module default) Azure VM size (type). Consult the *VM-Series<br>                        Deployment Guide* as only a few selected sizes are supported.<br>- `bootstrap_options` - (`map`, optional, mutually exclusive with `bootstrap_package`) bootstrap options passed to PAN-OS<br>                        when launched for the 1st time, for details see module documentation.<br>- `bootstrap_package` - (`map`, optional, mutually exclusive with `bootstrap_options`) a map defining content of the bootstrap<br>                        package. For details and available properties refer to `vmseries` variable. | <pre>object({<br>    version = optional(string)<br>    size    = optional(string)<br>    bootstrap_options = optional(object({<br>      type                                  = optional(string)<br>      ip-address                            = optional(string)<br>      default-gateway                       = optional(string)<br>      netmask                               = optional(string)<br>      ipv6-address                          = optional(string)<br>      ipv6-default-gateway                  = optional(string)<br>      hostname                              = optional(string)<br>      panorama-server                       = optional(string)<br>      panorama-server-2                     = optional(string)<br>      tplname                               = optional(string)<br>      dgname                                = optional(string)<br>      cgname                                = optional(string)<br>      dns-primary                           = optional(string)<br>      dns-secondary                         = optional(string)<br>      vm-auth-key                           = optional(string)<br>      op-command-modes                      = optional(string)<br>      op-cmd-dpdk-pkt-io                    = optional(string)<br>      plugin-op-commands                    = optional(string)<br>      dhcp-send-hostname                    = optional(string)<br>      dhcp-send-client-id                   = optional(string)<br>      dhcp-accept-server-hostname           = optional(string)<br>      dhcp-accept-server-domain             = optional(string)<br>      vm-series-auto-registration-pin-id    = optional(string)<br>      vm-series-auto-registration-pin-value = optional(string)<br>      auth-key                              = optional(string)<br>      authcodes                             = optional(string)<br>    }))<br>    bootstrap_package = optional(object({<br>      bootstrap_storage_key  = string<br>      static_files           = optional(map(string), {})<br>      bootstrap_package_path = optional(string)<br>      bootstrap_xml_template = optional(string)<br>      private_snet_key       = optional(string)<br>      public_snet_key        = optional(string)<br>      ai_update_interval     = optional(number, 5)<br>      intranet_cidr          = optional(string)<br>    }))<br>  })</pre> | `{}` | no |
| <a name="input_vnet_peerings"></a> [vnet\_peerings](#input\_vnet\_peerings) | A map defining VNET peerings.<br><br>Following properties are supported:<br>- `local_vnet_name`            - (`string`, required) name of the local VNET.<br>- `local_resource_group_name`  - (`string`, optional) name of the resource group, in which local VNET exists.<br>- `remote_vnet_name`           - (`string`, required) name of the remote VNET.<br>- `remote_resource_group_name` - (`string`, optional) name of the resource group, in which remote VNET exists. | <pre>map(object({<br>    local_vnet_name            = string<br>    local_resource_group_name  = optional(string)<br>    remote_vnet_name           = string<br>    remote_resource_group_name = optional(string)<br>  }))</pre> | `{}` | no |
| <a name="input_vnets"></a> [vnets](#input\_vnets) | A map defining VNETs.<br><br>For detailed documentation on each property refer to [module documentation](../../modules/vnet/README.md)<br><br>- `create_virtual_network`                   - (`bool`, optional, defaults to `true`) when set to `true` will create a VNET,<br>                                               `false` will source an existing VNET.<br>- `name`                                     - (`string`, required) a name of a VNET. In case `create_virtual_network = false`<br>                                               this should be a full resource name, including prefixes.<br>- `resource_group_name`                      - (`string`, optional, defaults to current RG) a name of an existing Resource<br>                                               Group in which the VNET will reside or is sourced from.<br>- `address_space`                            - (`list`, required when `create_virtual_network = false`) a list of CIDRs for a<br>                                               newly created VNET.<br>- `dns_servers`                              - (`list`, optional, defaults to module defaults) a list of IP addresses of custom<br>                                               DNS servers (by default Azure DNS is used).<br>- `vnet_encryption`                          - (`string`, optional, defaults to module default) enables Azure Virtual Network<br>                                               Encryption when set, only possible value at the moment is `AllowUnencrypted`. <br>                                               When set to `null`, the feature is disabled.<br>- `ddos_protection_plan_name`                - (`string`, optional, defaults to `null`) name of an existing Azure Network DDOS<br>                                               Protection Plan to be associated with the VNET.<br>- `ddos_protection_plan_resource_group_name` - (`string`, optional, defaults to `null`) name of the Resource Group containing<br>                                               an existing Azure Network DDOS Protection Plan to be associated with the VNET.<br>- `network_security_groups`                  - (`map`, optional) map of Network Security Groups to create, for details see<br>                                               [VNET module documentation](../../modules/vnet/README.md#network\_security\_groups).<br>- `route_tables`                             - (`map`, optional) map of Route Tables to create, for details see<br>                                               [VNET module documentation](../../modules/vnet/README.md#route\_tables).<br>- `subnets`                                  - (`map`, optional) map of Subnets to create or source, for details see<br>                                               [VNET module documentation](../../modules/vnet/README.md#subnets). | <pre>map(object({<br>    create_virtual_network                   = optional(bool, true)<br>    name                                     = string<br>    resource_group_name                      = optional(string)<br>    address_space                            = optional(list(string))<br>    dns_servers                              = optional(list(string))<br>    vnet_encryption                          = optional(string)<br>    ddos_protection_plan_name                = optional(string)<br>    ddos_protection_plan_resource_group_name = optional(string)<br>    network_security_groups = optional(map(object({<br>      name = string<br>      rules = optional(map(object({<br>        name                         = string<br>        priority                     = number<br>        direction                    = string<br>        access                       = string<br>        protocol                     = string<br>        source_port_range            = optional(string)<br>        source_port_ranges           = optional(list(string))<br>        destination_port_range       = optional(string)<br>        destination_port_ranges      = optional(list(string))<br>        source_address_prefix        = optional(string)<br>        source_address_prefixes      = optional(list(string))<br>        destination_address_prefix   = optional(string)<br>        destination_address_prefixes = optional(list(string))<br>      })), {})<br>    })), {})<br>    route_tables = optional(map(object({<br>      name                          = string<br>      bgp_route_propagation_enabled = optional(bool)<br>      routes = map(object({<br>        name                = string<br>        address_prefix      = string<br>        next_hop_type       = string<br>        next_hop_ip_address = optional(string)<br>      }))<br>    })), {})<br>    subnets = optional(map(object({<br>      create                          = optional(bool, true)<br>      name                            = string<br>      address_prefixes                = optional(list(string), [])<br>      network_security_group_key      = optional(string)<br>      route_table_key                 = optional(string)<br>      enable_storage_service_endpoint = optional(bool)<br>      enable_cloudngfw_delegation     = optional(bool)<br>    })), {})<br>  }))</pre> | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_password"></a> [password](#output\_password) | The password of the firewall. |
<!-- END_TF_DOCS -->